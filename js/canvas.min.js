"undefined"==typeof WeakMap&&!function(){var t=Object.defineProperty,e=Date.now()%1e9,n=function(){this.name="__st"+(1e9*Math.random()>>>0)+(e++ +"__")};n.prototype={set:function(e,n){var i=e[this.name];i&&i[0]===e?i[1]=n:t(e,this.name,{value:[e,n],writable:!0})},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0},"delete":function(t){this.set(t,void 0)}},window.WeakMap=n}(),function(t){t=t||{},t.external=t.external||{};var e={shadow:function(t){return t?t.shadowRoot||t.webkitShadowRoot:void 0},canTarget:function(t){return t&&Boolean(t.elementFromPoint)},targetingShadow:function(t){var e=this.shadow(t);return this.canTarget(e)?e:void 0},olderShadow:function(t){var e=t.olderShadowRoot;if(!e){var n=t.querySelector("shadow");n&&(e=n.olderShadowRoot)}return e},allShadows:function(t){for(var e=[],n=this.shadow(t);n;)e.push(n),n=this.olderShadow(n);return e},searchRoot:function(t,e,n){if(t){var i,r,s=t.elementFromPoint(e,n);for(r=this.targetingShadow(s);r;){if(i=r.elementFromPoint(e,n)){var o=this.targetingShadow(i);return this.searchRoot(o,e,n)||i}r=this.olderShadow(r)}return s}},owner:function(t){for(var e=t;e.parentNode;)e=e.parentNode;return e},findTarget:function(t){var e=t.clientX,n=t.clientY,i=this.owner(t.target);return i.elementFromPoint(e,n)||(i=document),this.searchRoot(i,e,n)}};t.targetFinding=e,t.findTarget=e.findTarget.bind(e),window.PointerEventsPolyfill=t}(window.PointerEventsPolyfill),function(){function t(t){return"body ^^ "+e(t)}function e(t){return'[touch-action="'+t+'"]'}function n(t){return"{ -ms-touch-action: "+t+"; touch-action: "+t+"; touch-action-delay: none; }"}var i=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],r="";i.forEach(function(i){String(i)===i?(r+=e(i)+n(i)+"\n",r+=t(i)+n(i)+"\n"):(r+=i.selectors.map(e)+n(i.rule)+"\n",r+=i.selectors.map(t)+n(i.rule)+"\n")});var s=document.createElement("style");s.textContent=r,document.head.appendChild(s)}(),function(t){function e(t,r){r=r||{};var s=r.buttons;if(void 0===s)switch(r.which){case 1:s=1;break;case 2:s=4;break;case 3:s=2;break;default:s=0}var c;if(n)c=new MouseEvent(t,r);else{c=document.createEvent("MouseEvent");for(var l,u={},h=0;h<o.length;h++)l=o[h],u[l]=r[l]||a[h];c.initMouseEvent(t,u.bubbles,u.cancelable,u.view,u.detail,u.screenX,u.screenY,u.clientX,u.clientY,u.ctrlKey,u.altKey,u.shiftKey,u.metaKey,u.button,u.relatedTarget)}c.__proto__=e.prototype,i||Object.defineProperty(c,"buttons",{get:function(){return s},enumerable:!0});var f=0;return f=r.pressure?r.pressure:s?.5:0,Object.defineProperties(c,{pointerId:{value:r.pointerId||0,enumerable:!0},width:{value:r.width||0,enumerable:!0},height:{value:r.height||0,enumerable:!0},pressure:{value:f,enumerable:!0},tiltX:{value:r.tiltX||0,enumerable:!0},tiltY:{value:r.tiltY||0,enumerable:!0},pointerType:{value:r.pointerType||"",enumerable:!0},hwTimestamp:{value:r.hwTimestamp||0,enumerable:!0},isPrimary:{value:r.isPrimary||!1,enumerable:!0}}),c}var n=!1,i=!1;try{var r=new MouseEvent("click",{buttons:1});n=!0,i=1===r.buttons}catch(s){}var o=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget"],a=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null];e.prototype=Object.create(MouseEvent.prototype),t.PointerEvent||(t.PointerEvent=e)}(window),function(t){function e(){if(n){var t=new Map;return t.pointers=i,t}this.keys=[],this.values=[]}var n=window.Map&&window.Map.prototype.forEach,i=function(){return this.size};e.prototype={set:function(t,e){var n=this.keys.indexOf(t);n>-1?this.values[n]=e:(this.keys.push(t),this.values.push(e))},has:function(t){return this.keys.indexOf(t)>-1},"delete":function(t){var e=this.keys.indexOf(t);e>-1&&(this.keys.splice(e,1),this.values.splice(e,1))},get:function(t){var e=this.keys.indexOf(t);return this.values[e]},clear:function(){this.keys.length=0,this.values.length=0},forEach:function(t,e){this.values.forEach(function(n,i){t.call(e,n,this.keys[i],this)},this)},pointers:function(){return this.keys.length}},t.PointerMap=e}(window.PointerEventsPolyfill),function(t){var e=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which"],n=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,void 0,0,0,0,0,0,0,"",0,!1,"",null,null,0],i={targets:new WeakMap,handledEvents:new WeakMap,pointermap:new t.PointerMap,eventMap:{},eventSources:{},eventSourceList:[],registerSource:function(t,e){var n=e,i=n.events;i&&(i.forEach(function(t){n[t]&&(this.eventMap[t]=n[t].bind(n))},this),this.eventSources[t]=n,this.eventSourceList.push(n))},register:function(t){for(var e,n=this.eventSourceList.length,i=0;n>i&&(e=this.eventSourceList[i]);i++)e.register.call(e,t)},unregister:function(t){for(var e,n=this.eventSourceList.length,i=0;n>i&&(e=this.eventSourceList[i]);i++)e.unregister.call(e,t)},contains:t.external.contains||function(t,e){return t.contains(e)},down:function(t){this.fireEvent("pointerdown",t)},move:function(t){this.fireEvent("pointermove",t)},up:function(t){this.fireEvent("pointerup",t)},enter:function(t){t.bubbles=!1,this.fireEvent("pointerenter",t)},leave:function(t){t.bubbles=!1,this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){this.fireEvent("pointercancel",t)},leaveOut:function(t){this.contains(t.target,t.relatedTarget)||this.leave(t),this.out(t)},enterOver:function(t){this.contains(t.target,t.relatedTarget)||this.enter(t),this.over(t)},eventHandler:function(t){if(!this.handledEvents.get(t)){var e=t.type,n=this.eventMap&&this.eventMap[e];n&&n(t),this.handledEvents.set(t,!0)}},listen:function(t,e){e.forEach(function(e){this.addEvent(t,e)},this)},unlisten:function(t,e){e.forEach(function(e){this.removeEvent(t,e)},this)},addEvent:t.external.addEvent||function(t,e){t.addEventListener(e,this.boundHandler)},removeEvent:t.external.removeEvent||function(t,e){t.removeEventListener(e,this.boundHandler)},makeEvent:function(t,e){this.captureInfo&&(e.relatedTarget=null);var n=new PointerEvent(t,e);return e.preventDefault&&(n.preventDefault=e.preventDefault),this.targets.set(n,this.targets.get(e)||e.target),n},fireEvent:function(t,e){var n=this.makeEvent(t,e);return this.dispatchEvent(n)},cloneEvent:function(t){for(var i,r={},s=0;s<e.length;s++)i=e[s],r[i]=t[i]||n[s];return t.preventDefault&&(r.preventDefault=function(){t.preventDefault()}),r},getTarget:function(t){return this.captureInfo&&this.captureInfo.id===t.pointerId?this.captureInfo.target:this.targets.get(t)},setCapture:function(t,e){this.captureInfo&&this.releaseCapture(this.captureInfo.id),this.captureInfo={id:t,target:e};var n=new PointerEvent("gotpointercapture",{bubbles:!0});this.implicitRelease=this.releaseCapture.bind(this,t),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease),this.targets.set(n,e),this.asyncDispatchEvent(n)},releaseCapture:function(t){if(this.captureInfo&&this.captureInfo.id===t){var e=new PointerEvent("lostpointercapture",{bubbles:!0}),n=this.captureInfo.target;this.captureInfo=null,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease),this.targets.set(e,n),this.asyncDispatchEvent(e)}},dispatchEvent:t.external.dispatchEvent||function(t){var e=this.getTarget(t);return e?e.dispatchEvent(t):void 0},asyncDispatchEvent:function(t){setTimeout(this.dispatchEvent.bind(this,t),0)}};i.boundHandler=i.eventHandler.bind(i),t.dispatcher=i,t.register=i.register.bind(i),t.unregister=i.unregister.bind(i)}(window.PointerEventsPolyfill),function(t){function e(t,e,n,i){this.addCallback=t.bind(i),this.removeCallback=e.bind(i),this.changedCallback=n.bind(i),o&&(this.observer=new o(this.mutationWatcher.bind(this)))}var n=Array.prototype.forEach.call.bind(Array.prototype.forEach),i=Array.prototype.map.call.bind(Array.prototype.map),r=Array.prototype.slice.call.bind(Array.prototype.slice),s=Array.prototype.filter.call.bind(Array.prototype.filter),o=window.MutationObserver||window.WebKitMutationObserver,a="[touch-action]",c={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};e.prototype={watchSubtree:function(e){t.targetFinding.canTarget(e)&&this.observer.observe(e,c)},enableOnSubtree:function(t){this.watchSubtree(t),t===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(t)},installNewSubtree:function(t){n(this.findElements(t),this.addElement,this)},findElements:function(t){return t.querySelectorAll?t.querySelectorAll(a):[]},removeElement:function(t){this.removeCallback(t)},addElement:function(t){this.addCallback(t)},elementChanged:function(t,e){this.changedCallback(t,e)},concatLists:function(t,e){return t.concat(r(e))},installOnLoad:function(){document.addEventListener("DOMContentLoaded",this.installNewSubtree.bind(this,document))},isElement:function(t){return t.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(t){var e=i(t,this.findElements,this);return e.push(s(t,this.isElement)),e.reduce(this.concatLists,[])},mutationWatcher:function(t){t.forEach(this.mutationHandler,this)},mutationHandler:function(t){if("childList"===t.type){var e=this.flattenMutationTree(t.addedNodes);e.forEach(this.addElement,this);var n=this.flattenMutationTree(t.removedNodes);n.forEach(this.removeElement,this)}else"attributes"===t.type&&this.elementChanged(t.target,t.oldValue)}},o||(e.prototype.watchSubtree=function(){console.warn("PointerEventsPolyfill: MutationObservers not found, touch-action will not be dynamically detected")}),t.Installer=e}(window.PointerEventsPolyfill),function(t){var e=t.dispatcher,n=e.pointermap,i=25,r={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(t){e.listen(t,this.events)},unregister:function(t){e.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,n=this.lastTouches,r=t.clientX,s=t.clientY,o=0,a=n.length;a>o&&(e=n[o]);o++){var c=Math.abs(r-e.x),l=Math.abs(s-e.y);if(i>=c&&i>=l)return!0}},prepareEvent:function(t){var n=e.cloneEvent(t),i=n.preventDefault;return n.preventDefault=function(){t.preventDefault(),i()},n.pointerId=this.POINTER_ID,n.isPrimary=!0,n.pointerType=this.POINTER_TYPE,n},mousedown:function(t){if(!this.isEventSimulatedFromTouch(t)){var i=n.has(this.POINTER_ID);i&&this.cancel(t);var r=this.prepareEvent(t);n.set(this.POINTER_ID,t),e.down(r)}},mousemove:function(t){if(!this.isEventSimulatedFromTouch(t)){var n=this.prepareEvent(t);e.move(n)}},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var i=n.get(this.POINTER_ID);if(i&&i.button===t.button){var r=this.prepareEvent(t);e.up(r),this.cleanupMouse()}}},mouseover:function(t){if(!this.isEventSimulatedFromTouch(t)){var n=this.prepareEvent(t);e.enterOver(n)}},mouseout:function(t){if(!this.isEventSimulatedFromTouch(t)){var n=this.prepareEvent(t);e.leaveOut(n)}},cancel:function(t){var n=this.prepareEvent(t);e.cancel(n),this.cleanupMouse()},cleanupMouse:function(){n["delete"](this.POINTER_ID)}};t.mouseEvents=r}(window.PointerEventsPolyfill),function(t){var e,n=t.dispatcher,i=t.findTarget,r=t.targetFinding.allShadows.bind(t.targetFinding),s=n.pointermap,o=Array.prototype.map.call.bind(Array.prototype.map),a=2500,c=200,l="touch-action",u=!1,h={scrollType:new WeakMap,events:["touchstart","touchmove","touchend","touchcancel"],register:function(t){u?n.listen(t,this.events):e.enableOnSubtree(t)},unregister:function(t){u&&n.unlisten(t,this.events)},elementAdded:function(t){var e=t.getAttribute(l),i=this.touchActionToScrollType(e);i&&(this.scrollType.set(t,i),n.listen(t,this.events),r(t).forEach(function(t){this.scrollType.set(t,i),n.listen(t,this.events)},this))},elementRemoved:function(t){this.scrollType["delete"](t),n.unlisten(t,this.events),r(t).forEach(function(t){this.scrollType["delete"](t),n.unlisten(t,this.events)},this)},elementChanged:function(t,e){var n=t.getAttribute(l),i=this.touchActionToScrollType(n),s=this.touchActionToScrollType(e);i&&s?(this.scrollType.set(t,i),r(t).forEach(function(t){this.scrollType.set(t,i)},this)):s?this.elementRemoved(t):i&&this.elementAdded(t)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(t){var e=t,n=this.scrollTypes;return"none"===e?"none":e===n.XSCROLLER?"X":e===n.YSCROLLER?"Y":n.SCROLLER.exec(e)?"XY":void 0},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===s.pointers()||1===s.pointers()&&s.has(1))&&(this.firstTouch=t.identifier,this.firstXY={X:t.clientX,Y:t.clientY},this.scrolling=!1,this.cancelResetClickCount())},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstXY=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var t=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(t,c)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},touchToPointer:function(t){var e=n.cloneEvent(t);return e.pointerId=t.identifier+2,e.target=i(e),e.bubbles=!0,e.cancelable=!0,e.detail=this.clickCount,e.button=0,e.buttons=1,e.width=t.webkitRadiusX||t.radiusX||0,e.height=t.webkitRadiusY||t.radiusY||0,e.pressure=t.webkitForce||t.force||.5,e.isPrimary=this.isPrimaryTouch(t),e.pointerType=this.POINTER_TYPE,e},processTouches:function(t,e){var n=t.changedTouches,i=o(n,this.touchToPointer,this);i.forEach(function(e){e.preventDefault=function(){this.scrolling=!1,this.firstXY=null,t.preventDefault()}},this),i.forEach(e,this)},shouldScroll:function(t){if(this.firstXY){var e,n=this.scrollType.get(t.currentTarget);if("none"===n)e=!1;else if("XY"===n)e=!0;else{var i=t.changedTouches[0],r=n,s="Y"===n?"X":"Y",o=Math.abs(i["client"+r]-this.firstXY[r]),a=Math.abs(i["client"+s]-this.firstXY[s]);e=o>=a}return this.firstXY=null,e}},findTouch:function(t,e){for(var n,i=0,r=t.length;r>i&&(n=t[i]);i++)if(n.identifier===e)return!0},vacuumTouches:function(t){var e=t.touches;if(s.pointers()>=e.length){var n=[];s.forEach(function(t,i){if(1!==i&&!this.findTouch(e,i-2)){var r=t.out;n.push(this.touchToPointer(r))}},this),n.forEach(this.cancelOut,this)}},touchstart:function(t){this.vacuumTouches(t),this.setPrimaryTouch(t.changedTouches[0]),this.dedupSynthMouse(t),this.scrolling||(this.clickCount++,this.processTouches(t,this.overDown))},overDown:function(t){s.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),n.over(t),n.down(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=t,i=s.get(e.pointerId);if(i){var r=i.out,o=i.outTarget;n.move(e),r&&o!==e.target&&(r.relatedTarget=e.target,e.relatedTarget=o,r.target=o,e.target?(n.leaveOut(r),n.enterOver(e)):(e.target=o,e.relatedTarget=null,this.cancelOut(e))),i.out=e,i.outTarget=e.target}},touchend:function(t){this.dedupSynthMouse(t),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(n.up(t),n.out(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){n.cancel(t),n.out(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){s["delete"](t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(e){var n=t.mouseEvents.lastTouches,i=e.changedTouches[0];if(this.isPrimaryTouch(i)){var r={x:i.clientX,y:i.clientY};n.push(r);var s=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}.bind(null,n,r);setTimeout(s,a)}}};u||(e=new t.Installer(h.elementAdded,h.elementRemoved,h.elementChanged,h)),t.touchEvents=h}(window.PointerEventsPolyfill),function(t){var e=t.dispatcher,n=e.pointermap,i=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,r={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){e.listen(t,this.events)},unregister:function(t){e.unlisten(t,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(t){var n=t;return i&&(n=e.cloneEvent(t),n.pointerType=this.POINTER_TYPES[t.pointerType]),n},cleanup:function(t){n["delete"](t)},MSPointerDown:function(t){n.set(t.pointerId,t);var i=this.prepareEvent(t);e.down(i)},MSPointerMove:function(t){var n=this.prepareEvent(t);e.move(n)},MSPointerUp:function(t){var n=this.prepareEvent(t);e.up(n),this.cleanup(t.pointerId)},MSPointerOut:function(t){var n=this.prepareEvent(t);e.leaveOut(n)},MSPointerOver:function(t){var n=this.prepareEvent(t);e.enterOver(n)},MSPointerCancel:function(t){var n=this.prepareEvent(t);e.cancel(n),this.cleanup(t.pointerId)},MSLostPointerCapture:function(t){var n=e.makeEvent("lostpointercapture",t);e.dispatchEvent(n)},MSGotPointerCapture:function(t){var n=e.makeEvent("gotpointercapture",t);e.dispatchEvent(n)}};t.msEvents=r}(window.PointerEventsPolyfill),function(t){var e=t.dispatcher;if(void 0===window.navigator.pointerEnabled){if(Object.defineProperty(window.navigator,"pointerEnabled",{value:!0,enumerable:!0}),window.navigator.msPointerEnabled){var n=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:n,enumerable:!0}),e.registerSource("ms",t.msEvents)}else e.registerSource("mouse",t.mouseEvents),void 0!==window.ontouchstart&&e.registerSource("touch",t.touchEvents);e.register(document)}}(window.PointerEventsPolyfill),function(t){function e(t){if(!r.pointermap.has(t))throw new Error("InvalidPointerId")}var n,i,r=t.dispatcher,s=window.navigator;s.msPointerEnabled?(n=function(t){e(t),this.msSetPointerCapture(t)},i=function(t){e(t),this.msReleasePointerCapture(t)}):(n=function(t){e(t),r.setCapture(t,this)},i=function(t){e(t),r.releaseCapture(t,this)}),window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:n},releasePointerCapture:{value:i}})}(window.PointerEventsPolyfill),function(){var t=this,e=t._,n={},i=Array.prototype,r=Object.prototype,s=i.push,o=i.slice,a=i.concat,c=r.toString,l=r.hasOwnProperty,u=i.forEach,h=i.map,f=i.reduce,d=i.reduceRight,p=i.filter,v=i.every,m=i.some,g=i.indexOf,_=i.lastIndexOf,r=Array.isArray,y=Object.keys,b=Function.prototype.bind,x=function(t){return t instanceof x?t:this instanceof x?void(this._wrapped=t):new x(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):t._=x,x.VERSION="1.5.1";var E=x.each=x.forEach=function(t,e,i){if(null!=t)if(u&&t.forEach===u)t.forEach(e,i);else if(t.length===+t.length)for(var r=0,s=t.length;s>r&&e.call(i,t[r],r,t)!==n;r++);else for(r in t)if(x.has(t,r)&&e.call(i,t[r],r,t)===n)break};x.map=x.collect=function(t,e,n){var i=[];return null==t?i:h&&t.map===h?t.map(e,n):(E(t,function(t,r,s){i.push(e.call(n,t,r,s))}),i)},x.reduce=x.foldl=x.inject=function(t,e,n,i){var r=2<arguments.length;if(null==t&&(t=[]),f&&t.reduce===f)return i&&(e=x.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(E(t,function(t,s,o){r?n=e.call(i,n,t,s,o):(n=t,r=!0)}),!r)throw new TypeError("Reduce of empty array with no initial value");return n},x.reduceRight=x.foldr=function(t,e,n,i){var r=2<arguments.length;if(null==t&&(t=[]),d&&t.reduceRight===d)return i&&(e=x.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var s=t.length;if(s!==+s)var o=x.keys(t),s=o.length;if(E(t,function(a,c,l){c=o?o[--s]:--s,r?n=e.call(i,n,t[c],c,l):(n=t[c],r=!0)}),!r)throw new TypeError("Reduce of empty array with no initial value");return n},x.find=x.detect=function(t,e,n){var i;return w(t,function(t,r,s){return e.call(n,t,r,s)?(i=t,!0):void 0}),i},x.filter=x.select=function(t,e,n){var i=[];return null==t?i:p&&t.filter===p?t.filter(e,n):(E(t,function(t,r,s){e.call(n,t,r,s)&&i.push(t)}),i)},x.reject=function(t,e,n){return x.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},x.every=x.all=function(t,e,i){e||(e=x.identity);var r=!0;return null==t?r:v&&t.every===v?t.every(e,i):(E(t,function(t,s,o){return(r=r&&e.call(i,t,s,o))?void 0:n}),!!r)};var w=x.some=x.any=function(t,e,i){e||(e=x.identity);var r=!1;return null==t?r:m&&t.some===m?t.some(e,i):(E(t,function(t,s,o){return r||(r=e.call(i,t,s,o))?n:void 0}),!!r)};x.contains=x.include=function(t,e){return null==t?!1:g&&t.indexOf===g?-1!=t.indexOf(e):w(t,function(t){return t===e})},x.invoke=function(t,e){var n=o.call(arguments,2),i=x.isFunction(e);return x.map(t,function(t){return(i?e:t[e]).apply(t,n)})},x.pluck=function(t,e){return x.map(t,function(t){return t[e]})},x.where=function(t,e,n){return x.isEmpty(e)?n?void 0:[]:x[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},x.findWhere=function(t,e){return x.where(t,e,!0)},x.max=function(t,e,n){if(!e&&x.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);if(!e&&x.isEmpty(t))return-1/0;var i={computed:-1/0,value:-1/0};return E(t,function(t,r,s){r=e?e.call(n,t,r,s):t,r>i.computed&&(i={value:t,computed:r})}),i.value},x.min=function(t,e,n){if(!e&&x.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);if(!e&&x.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return E(t,function(t,r,s){r=e?e.call(n,t,r,s):t,r<i.computed&&(i={value:t,computed:r})}),i.value},x.shuffle=function(t){var e,n=0,i=[];return E(t,function(t){e=x.random(n++),i[n-1]=i[e],i[e]=t}),i};var A=function(t){return x.isFunction(t)?t:function(e){return e[t]}};x.sortBy=function(t,e,n){var i=A(e);return x.pluck(x.map(t,function(t,e,r){return{value:t,index:e,criteria:i.call(n,t,e,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index<e.index?-1:1}),"value")};var C=function(t,e,n,i){var r={},s=A(null==e?x.identity:e);return E(t,function(e,o){var a=s.call(n,e,o,t);i(r,a,e)}),r};x.groupBy=function(t,e,n){return C(t,e,n,function(t,e,n){(x.has(t,e)?t[e]:t[e]=[]).push(n)})},x.countBy=function(t,e,n){return C(t,e,n,function(t,e){x.has(t,e)||(t[e]=0),t[e]++})},x.sortedIndex=function(t,e,n,i){n=null==n?x.identity:A(n),e=n.call(i,e);for(var r=0,s=t.length;s>r;){var o=r+s>>>1;n.call(i,t[o])<e?r=o+1:s=o}return r},x.toArray=function(t){return t?x.isArray(t)?o.call(t):t.length===+t.length?x.map(t,x.identity):x.values(t):[]},x.size=function(t){return null==t?0:t.length===+t.length?t.length:x.keys(t).length},x.first=x.head=x.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:o.call(t,0,e)},x.initial=function(t,e,n){return o.call(t,0,t.length-(null==e||n?1:e))},x.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:o.call(t,Math.max(t.length-e,0))},x.rest=x.tail=x.drop=function(t,e,n){return o.call(t,null==e||n?1:e)},x.compact=function(t){return x.filter(t,x.identity)};var T=function(t,e,n){return e&&x.every(t,x.isArray)?a.apply(n,t):(E(t,function(t){x.isArray(t)||x.isArguments(t)?e?s.apply(n,t):T(t,e,n):n.push(t)}),n)};x.flatten=function(t,e){return T(t,e,[])},x.without=function(t){return x.difference(t,o.call(arguments,1))},x.uniq=x.unique=function(t,e,n,i){x.isFunction(e)&&(i=n,n=e,e=!1),n=n?x.map(t,n,i):t;var r=[],s=[];return E(n,function(n,i){(e?i&&s[s.length-1]===n:x.contains(s,n))||(s.push(n),r.push(t[i]))}),r},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(t){var e=o.call(arguments,1);return x.filter(x.uniq(t),function(t){return x.every(e,function(e){return 0<=x.indexOf(e,t)})})},x.difference=function(t){var e=a.apply(i,o.call(arguments,1));return x.filter(t,function(t){return!x.contains(e,t)})},x.zip=function(){for(var t=x.max(x.pluck(arguments,"length").concat(0)),e=Array(t),n=0;t>n;n++)e[n]=x.pluck(arguments,""+n);return e},x.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},x.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=x.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(g&&t.indexOf===g)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},x.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(_&&t.lastIndexOf===_)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(n=i?n:t.length;n--;)if(t[n]===e)return n;return-1},x.range=function(t,e,n){1>=arguments.length&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,s=Array(i);i>r;)s[r++]=t,t+=n;return s};var S=function(){};x.bind=function(t,e){var n,i;if(b&&t.bind===b)return b.apply(t,o.call(arguments,1));if(!x.isFunction(t))throw new TypeError;return n=o.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(o.call(arguments)));S.prototype=t.prototype;var r=new S;S.prototype=null;var s=t.apply(r,n.concat(o.call(arguments)));return Object(s)===s?s:r}},x.partial=function(t){var e=o.call(arguments,1);return function(){return t.apply(this,e.concat(o.call(arguments)))}},x.bindAll=function(t){var e=o.call(arguments,1);if(0===e.length)throw Error("bindAll must be passed function names");return E(e,function(e){t[e]=x.bind(t[e],t)}),t},x.memoize=function(t,e){var n={};return e||(e=x.identity),function(){var i=e.apply(this,arguments);return x.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},x.delay=function(t,e){var n=o.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},x.defer=function(t){return x.delay.apply(x,[t,1].concat(o.call(arguments,1)))},x.throttle=function(t,e,n){var i,r,s,o=null,a=0;n||(n={});var c=function(){a=!1===n.leading?0:new Date,o=null,s=t.apply(i,r)};return function(){var l=new Date;!a&&!1===n.leading&&(a=l);var u=e-(l-a);return i=this,r=arguments,0>=u?(clearTimeout(o),o=null,a=l,s=t.apply(i,r)):!o&&!1!==n.trailing&&(o=setTimeout(c,u)),s}},x.debounce=function(t,e,n){var i,r=null;return function(){var s=this,o=arguments,a=n&&!r;return clearTimeout(r),r=setTimeout(function(){r=null,n||(i=t.apply(s,o))},e),a&&(i=t.apply(s,o)),i}},x.once=function(t){var e=!1,n;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}},x.wrap=function(t,e){return function(){var n=[t];return s.apply(n,arguments),e.apply(this,n)}},x.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},x.after=function(t,e){return function(){return 1>--t?e.apply(this,arguments):void 0}},x.keys=y||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[],n;for(n in t)x.has(t,n)&&e.push(n);return e},x.values=function(t){var e=[],n;for(n in t)x.has(t,n)&&e.push(t[n]);return e},x.pairs=function(t){var e=[],n;for(n in t)x.has(t,n)&&e.push([n,t[n]]);return e},x.invert=function(t){var e={},n;for(n in t)x.has(t,n)&&(e[t[n]]=n);return e},x.functions=x.methods=function(t){var e=[],n;for(n in t)x.isFunction(t[n])&&e.push(n);return e.sort()},x.extend=function(t){return E(o.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},x.pick=function(t){var e={},n=a.apply(i,o.call(arguments,1));return E(n,function(n){n in t&&(e[n]=t[n])}),e},x.omit=function(t){var e={},n=a.apply(i,o.call(arguments,1)),r;for(r in t)x.contains(n,r)||(e[r]=t[r]);return e},x.defaults=function(t){return E(o.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},x.clone=function(t){return x.isObject(t)?x.isArray(t)?t.slice():x.extend({},t):t},x.tap=function(t,e){return e(t),t};var P=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof x&&(t=t._wrapped),e instanceof x&&(e=e._wrapped);var r=c.call(t);if(r!=c.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=n.length;s--;)if(n[s]==t)return i[s]==e;var s=t.constructor,o=e.constructor;if(!(s===o||x.isFunction(s)&&s instanceof s&&x.isFunction(o)&&o instanceof o))return!1;if(n.push(t),i.push(e),s=0,o=!0,"[object Array]"==r){if(s=t.length,o=s==e.length)for(;s--&&(o=P(t[s],e[s],n,i)););}else{for(var a in t)if(x.has(t,a)&&(s++,!(o=x.has(e,a)&&P(t[a],e[a],n,i))))break;if(o){for(a in e)if(x.has(e,a)&&!s--)break;o=!s}}return n.pop(),i.pop(),o};x.isEqual=function(t,e){return P(t,e,[],[])},x.isEmpty=function(t){if(null==t)return!0;if(x.isArray(t)||x.isString(t))return 0===t.length;for(var e in t)if(x.has(t,e))return!1;return!0},x.isElement=function(t){return!(!t||1!==t.nodeType)},x.isArray=r||function(t){return"[object Array]"==c.call(t)},x.isObject=function(t){return t===Object(t)},E("Arguments Function String Number Date RegExp".split(" "),function(t){x["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),x.isArguments(arguments)||(x.isArguments=function(t){return!(!t||!x.has(t,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(t){return"function"==typeof t}),x.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},x.isNaN=function(t){return x.isNumber(t)&&t!=+t},x.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"==c.call(t)},x.isNull=function(t){return null===t},x.isUndefined=function(t){return void 0===t},x.has=function(t,e){return l.call(t,e)},x.noConflict=function(){return t._=e,this},x.identity=function(t){return t},x.times=function(t,e,n){for(var i=Array(Math.max(0,t)),r=0;t>r;r++)i[r]=e.call(n,r);return i},x.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var k={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};k.unescape=x.invert(k.escape);var M={escape:RegExp("["+x.keys(k.escape).join("")+"]","g"),unescape:RegExp("("+x.keys(k.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(t){x[t]=function(e){return null==e?"":(""+e).replace(M[t],function(e){return k[t][e]})}}),x.result=function(t,e){if(null!=t){var n=t[e];return x.isFunction(n)?n.call(t):n}},x.mixin=function(t){E(x.functions(t),function(e){var n=x[e]=t[e];x.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),t=n.apply(x,t),this._chain?x(t).chain():t}})};var O=0;x.uniqueId=function(t){var e=++O+"";return t?t+e:e},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(t,e,n){var i;n=x.defaults({},n,x.templateSettings);var r=RegExp([(n.escape||R).source,(n.interpolate||R).source,(n.evaluate||R).source].join("|")+"|$","g"),s=0,o="__p+='";t.replace(r,function(e,n,i,r,a){return o+=t.slice(s,a).replace(U,function(t){return"\\"+F[t]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(o+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(o+="';\n"+r+"\n__p+='"),s=a+e.length,e}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=new Function(n.variable||"obj","_",o)}catch(a){throw a.source=o,a}return e?i(e,x):(e=function(t){return i.call(this,t,x)},e.source="function("+(n.variable||"obj")+"){\n"+o+"}",e)},x.chain=function(t){return x(t).chain()},x.mixin(x),E("pop push reverse shift sort splice unshift".split(" "),function(t){var e=i[t];x.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),("shift"==t||"splice"==t)&&0===n.length&&delete n[0],this._chain?x(n).chain():n}}),E(["concat","join","slice"],function(t){var e=i[t];x.prototype[t]=function(){var t=e.apply(this._wrapped,arguments);
return this._chain?x(t).chain():t}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this);var Backbone=Backbone||{};!function(){var t=[].slice,e=function(t,e,n){var i;t=-1;var r=e.length;switch(n.length){case 0:for(;++t<r;)(i=e[t]).callback.call(i.ctx);break;case 1:for(;++t<r;)(i=e[t]).callback.call(i.ctx,n[0]);break;case 2:for(;++t<r;)(i=e[t]).callback.call(i.ctx,n[0],n[1]);break;case 3:for(;++t<r;)(i=e[t]).callback.call(i.ctx,n[0],n[1],n[2]);break;default:for(;++t<r;)(i=e[t]).callback.apply(i.ctx,n)}},n=Backbone.Events={on:function(t,e,n){return this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){var i=this,r=_.once(function(){i.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n),this},off:function(t,e,n){var i,r,s,o,a,c,l,u;if(!this._events)return this;if(!t&&!e&&!n)return this._events={},this;for(o=t?[t]:_.keys(this._events),a=0,c=o.length;c>a;a++)if(t=o[a],i=this._events[t]){if(s=[],e||n)for(l=0,u=i.length;u>l;l++)r=i[l],(e&&e!==(r.callback._callback||r.callback)||n&&n!==r.context)&&s.push(r);this._events[t]=s}return this},trigger:function(n){if(!this._events)return this;var i=t.call(arguments,1),r=this._events[n],s=this._events.all;return r&&e(this,r,i),s&&e(this,s,arguments),this},listenTo:function(t,e,n){var i=this._listeners||(this._listeners={}),r=t._listenerId||(t._listenerId=_.uniqueId("l"));return i[r]=t,t.on(e,n||this,this),this},stopListening:function(t,e,n){var i=this._listeners;if(i){if(t)t.off(e,n,this),!e&&!n&&delete i[t._listenerId];else{for(var r in i)i[r].off(null,null,this);this._listeners={}}return this}}};n.bind=n.on,n.unbind=n.off,"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports.Backbone=exports.Backbone||Backbone)}(),function(){function t(t){var i=(new Date).getTime(),r=Math.max(0,16-(i-n)),s=e.setTimeout(function(){t(i+r)},r);return n=i+r,s}var e=this,n=0,i=["ms","moz","webkit","o"];if("undefined"!=typeof exports)"undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.requestAnimationFrame=t;else{for(var r=0;r<i.length&&!e.requestAnimationFrame;++r)e.requestAnimationFrame=e[i[r]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[i[r]+"CancelAnimationFrame"]||e[i[r]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=t),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(t){clearTimeout(t)})}}(),function(){function t(){var t=document.body.getBoundingClientRect(),e=this.width=t.width,t=this.height=t.height;this.renderer.setSize(e,t,this.ratio),this.trigger(v.Events.resize,e,t)}var e=this,n=e.Two||{},i=Math.sin,r=Math.cos,s=Math.atan2,o=Math.sqrt,a=Math.PI,c=2*a,l=a/2,u=Math.pow,h=Math.min,f=Math.max,d=0,p={hasEventListeners:_.isFunction(e.addEventListener),bind:function(t,e,n,i){return this.hasEventListeners?t.addEventListener(e,n,!!i):t.attachEvent("on"+e,n),this},unbind:function(t,e,n,i){return this.hasEventListeners?t.removeEventListeners(e,n,!!i):t.detachEvent("on"+e,n),this}},v=e.Two=function(n){n=_.defaults(n||{},{fullscreen:!1,width:640,height:480,type:v.Types.svg,autostart:!1}),_.each(n,function(t,e){"fullscreen"===e||"width"===e||"height"===e||"autostart"===e||(this[e]=t)},this),_.isElement(n.domElement)&&(this.type=v.Types[n.domElement.tagName.toLowerCase()]),this.renderer=new v[this.type](this),v.Utils.setPlaying.call(this,n.autostart),this.frameCount=0,n.fullscreen?(n=_.bind(t,this),_.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),_.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),p.bind(e,"resize",n),n()):_.isElement(n.domElement)||(this.renderer.setSize(n.width,n.height,this.ratio),this.width=n.width,this.height=n.height),this.scene=this.renderer.scene,v.Instances.push(this)};_.extend(v,{Array:e.Float32Array||Array,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.4.0",Identifier:"two_",Properties:{hierarchy:"hierarchy",demotion:"demotion"},Events:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert"},Commands:{move:"M",line:"L",curve:"C",close:"Z"},Resolution:8,Instances:[],noConflict:function(){return e.Two=n,this},uniqueId:function(){var t=d;return d++,t},Utils:{release:function(t){_.isObject(t)&&(_.isFunction(t.unbind)&&t.unbind(),t.vertices&&(_.isFunction(t.vertices.unbind)&&t.vertices.unbind(),_.each(t.vertices,function(t){_.isFunction(t.unbind)&&t.unbind()})),t.children&&_.each(t.children,function(t){v.Utils.release(t)}))},Curve:{CollinearityEpsilon:u(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:.01},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]},devicePixelRatio:e.devicePixelRatio||1,getBackingStoreRatio:function(t){return t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1},getRatio:function(t){return v.Utils.devicePixelRatio/E(t)},setPlaying:function(t){return this.playing=!!t,this},getComputedMatrix:function(t,e){e=e&&e.identity()||new v.Matrix;for(var n=t,i=[];n&&n._matrix;)i.push(n._matrix),n=n.parent;return i.reverse(),_.each(i,function(t){t=t.elements,e.multiply(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9])}),e},deltaTransformPoint:function(t,e,n){return new v.Vector(e*t.a+n*t.c+0,e*t.b+n*t.d+0)},decomposeMatrix:function(t){var e=v.Utils.deltaTransformPoint(t,0,1),n=v.Utils.deltaTransformPoint(t,1,0),e=180/Math.PI*Math.atan2(e.y,e.x)-90,n=180/Math.PI*Math.atan2(n.y,n.x);return{translateX:t.e,translateY:t.f,scaleX:Math.sqrt(t.a*t.a+t.b*t.b),scaleY:Math.sqrt(t.c*t.c+t.d*t.d),skewX:e,skewY:n,rotation:e}},applySvgAttributes:function(t,e){var n={},i={},r,s,o;if(getComputedStyle){var a=getComputedStyle(t);for(r=a.length;r--;)s=a[r],o=a[s],void 0!==o&&(i[s]=o)}for(r=t.attributes.length;r--;)o=t.attributes[r],n[o.nodeName]=o.value;_.isUndefined(i.opacity)||(i["stroke-opacity"]=i.opacity,i["fill-opacity"]=i.opacity),_.extend(i,n),i.visible=!(_.isUndefined(i.display)&&"none"===i.display)||_.isUndefined(i.visibility)&&"hidden"===i.visibility;for(s in i)switch(o=i[s],s){case"transform":if("none"===o)break;if(null===t.getCTM())break;n=v.Utils.decomposeMatrix(t.getCTM()),e.translation.set(n.translateX,n.translateY),e.rotation=n.rotation,e.scale=n.scaleX,i.x&&(e.translation.x=i.x),i.y&&(e.translation.y=i.y);break;case"visible":e.visible=o;break;case"stroke-linecap":e.cap=o;break;case"stroke-linejoin":e.join=o;break;case"stroke-miterlimit":e.miter=o;break;case"stroke-width":e.linewidth=parseFloat(o);break;case"stroke-opacity":case"fill-opacity":case"opacity":e.opacity=parseFloat(o);break;case"fill":case"stroke":e[s]="none"===o?"transparent":o;break;case"id":e.id=o;break;case"class":e.classList=o.split(" ")}return e},read:{svg:function(){return v.Utils.read.g.apply(this,arguments)},g:function(t){var e=new v.Group;v.Utils.applySvgAttributes(t,e);for(var n=0,i=t.childNodes.length;i>n;n++){var r=t.childNodes[n],s=r.nodeName;if(!s)return;s=s.replace(/svg\:/gi,"").toLowerCase(),s in v.Utils.read&&(r=v.Utils.read[s].call(this,r),e.add(r))}return e},polygon:function(t,e){var n=[];t.getAttribute("points").replace(/(-?[\d\.?]+),(-?[\d\.?]+)/g,function(t,e,i){n.push(new v.Anchor(parseFloat(e),parseFloat(i)))});var i=new v.Polygon(n,!e).noStroke();return i.fill="black",v.Utils.applySvgAttributes(t,i)},polyline:function(t){return v.Utils.read.polygon(t,!0)},path:function(t){var e=t.getAttribute("d"),n=new v.Anchor,i,r,s=!1,o=!1,a=e.match(/[a-df-z][^a-df-z]*/gi),c=a.length-1;return _.each(a.slice(0),function(t,e){var n=t[0],i=n.toLowerCase(),r=t.slice(1).trim().split(/[\s,]+|(?=\s?[+\-])/),s=[],o;switch(0>=e&&(a=[]),i){case"h":case"v":1<r.length&&(o=1);break;case"m":case"l":case"t":2<r.length&&(o=2);break;case"s":case"q":4<r.length&&(o=4);break;case"c":6<r.length&&(o=6)}if(o){for(var i=0,c=r.length,l=0;c>i;i+=o){var u=n;if(l>0)switch(n){case"m":u="l";break;case"M":u="L"}s.push([u].concat(r.slice(i,i+o)).join(" ")),l++}a=Array.prototype.concat.apply(a,s)}else a.push(t)}),e=_.flatten(_.map(a,function(t,e){var a,l,h=t[0],f=h.toLowerCase();r=t.slice(1).trim(),r=r.replace(/(-?\d+(?:\.\d*)?)[eE]([+\-]?\d+)/g,function(t,e,n){return parseFloat(e)*u(10,n)}),r=r.split(/[\s,]+|(?=\s?[+\-])/),o=h===f;var d,p,m,g;switch(f){case"z":e>=c?s=!0:(l=n.x,a=n.y,a=new v.Anchor(l,a,void 0,void 0,void 0,void 0,v.Commands.close));break;case"m":case"l":l=parseFloat(r[0]),a=parseFloat(r[1]),a=new v.Anchor(l,a,void 0,void 0,void 0,void 0,"m"===f?v.Commands.move:v.Commands.line),o&&a.addSelf(n),n=a;break;case"h":case"v":l="h"===f?"x":"y",h="x"===l?"y":"x",a=new v.Anchor(void 0,void 0,void 0,void 0,void 0,void 0,v.Commands.line),a[l]=parseFloat(r[0]),a[h]=n[h],o&&(a[l]+=n[l]),n=a;break;case"c":case"s":a=n.x,h=n.y,i||(i=new v.Vector),"c"===f?(d=parseFloat(r[0]),l=parseFloat(r[1]),f=parseFloat(r[2]),p=parseFloat(r[3]),m=parseFloat(r[4]),g=parseFloat(r[5])):(p=C(n,i,o),d=p.x,l=p.y,f=parseFloat(r[0]),p=parseFloat(r[1]),m=parseFloat(r[2]),g=parseFloat(r[3])),o&&(d+=a,l+=h,f+=a,p+=h,m+=a,g+=h),_.isObject(n.controls)||v.Anchor.AppendCurveProperties(n),n.controls.right.set(d-n.x,l-n.y),n=a=new v.Anchor(m,g,f-m,p-g,void 0,void 0,v.Commands.curve),i=a.controls.left;break;case"t":case"q":a=n.x,h=n.y,i||(i=new v.Vector),i.isZero()?(d=a,l=h):(d=i.x,h=i.y),"q"===f?(f=parseFloat(r[0]),p=parseFloat(r[1]),m=parseFloat(r[1]),g=parseFloat(r[2])):(p=C(n,i,o),f=p.x,p=p.y,m=parseFloat(r[0]),g=parseFloat(r[1])),o&&(d+=a,l+=h,f+=a,p+=h,m+=a,g+=h),_.isObject(n.controls)||v.Anchor.AppendCurveProperties(n),n.controls.right.set(d-n.x,l-n.y),n=a=new v.Anchor(m,g,f-m,p-g,void 0,void 0,v.Commands.curve),i=a.controls.left;break;case"a":throw new v.Utils.Error("not yet able to interpret Elliptical Arcs.")}return a})),1>=e.length?void 0:(e=_.compact(e),e=new v.Polygon(e,s,void 0,!0).noStroke(),e.fill="black",v.Utils.applySvgAttributes(t,e))},circle:function(t){var e=parseFloat(t.getAttribute("cx")),n=parseFloat(t.getAttribute("cy")),s=parseFloat(t.getAttribute("r")),o=v.Resolution,a=_.map(_.range(o),function(t){var e=t/o*c;return t=s*r(e),e=s*i(e),new v.Anchor(t,e)},this),a=new v.Polygon(a,!0,!0).noStroke();return a.translation.set(e,n),a.fill="black",v.Utils.applySvgAttributes(t,a)},ellipse:function(t){var e=parseFloat(t.getAttribute("cx")),n=parseFloat(t.getAttribute("cy")),s=parseFloat(t.getAttribute("rx")),o=parseFloat(t.getAttribute("ry")),a=v.Resolution,l=_.map(_.range(a),function(t){var e=t/a*c;return t=s*r(e),e=o*i(e),new v.Anchor(t,e)},this),l=new v.Polygon(l,!0,!0).noStroke();return l.translation.set(e,n),l.fill="black",v.Utils.applySvgAttributes(t,l)},rect:function(t){var e=parseFloat(t.getAttribute("x")),n=parseFloat(t.getAttribute("y")),i=parseFloat(t.getAttribute("width")),r=parseFloat(t.getAttribute("height")),i=i/2,r=r/2,s=[new v.Anchor(i,r),new v.Anchor(-i,r),new v.Anchor(-i,-r),new v.Anchor(i,-r)],s=new v.Polygon(s,!0).noStroke();return s.translation.set(e+i,n+r),s.fill="black",v.Utils.applySvgAttributes(t,s)},line:function(t){var e=parseFloat(t.getAttribute("x1")),n=parseFloat(t.getAttribute("y1")),i=parseFloat(t.getAttribute("x2")),r=parseFloat(t.getAttribute("y2")),i=(i-e)/2,r=(r-n)/2,s=[new v.Anchor(-i,-r),new v.Anchor(i,r)],s=new v.Polygon(s).noFill();return s.translation.set(e+i,n+r),v.Utils.applySvgAttributes(t,s)}},subdivide:function(t,e,n,i,r,s,o,a,c){c=c||v.Utils.Curve.RecursionLimit;var l=c+1;return t===o&&e===a?[new v.Anchor(o,a)]:_.map(_.range(0,l),function(c){var u=c/l;return c=w(u,t,n,r,o),u=w(u,e,i,s,a),new v.Anchor(c,u)})},getPointOnCubicBezier:function(t,e,n,i,r){var s=1-t;return s*s*s*e+3*s*s*t*n+3*s*t*t*i+t*t*t*r},getCurveLength:function(t,e,n,i,r,s,a,c,l){if(t===n&&e===i&&r===a&&s===c)return t=a-t,e=c-e,o(t*t+e*e);var u=9*(n-r)+3*(a-t),h=6*(t+r)-12*n,f=3*(n-t),d=9*(i-s)+3*(c-e),p=6*(e+s)-12*i,m=3*(i-e);return A(function(t){var e=(u*t+h)*t+f;return t=(d*t+p)*t+m,o(e*e+t*t)},0,1,l||v.Utils.Curve.RecursionLimit)},integrate:function(t,e,n,i){var r=v.Utils.Curve.abscissas[i-2],s=v.Utils.Curve.weights[i-2];n=.5*(n-e),e=n+e;var o=0,a=i+1>>1;for(i=1&i?s[o++]*t(e):0;a>o;){var c=n*r[o];i+=s[o++]*(t(e+c)+t(e-c))}return n*i},getCurveFromPoints:function(t,e){for(var n=t.length,i=n-1,r=0;n>r;r++){var s=t[r];_.isObject(s.controls)||v.Anchor.AppendCurveProperties(s);var o=e?x(r-1,n):f(r-1,0),a=e?x(r+1,n):h(r+1,i);b(t[o],s,t[a]),s._command=0===r?v.Commands.move:v.Commands.curve,s.controls.left.x=_.isNumber(s.controls.left.x)?s.controls.left.x:s.x,s.controls.left.y=_.isNumber(s.controls.left.y)?s.controls.left.y:s.y,s.controls.right.x=_.isNumber(s.controls.right.x)?s.controls.right.x:s.x,s.controls.right.y=_.isNumber(s.controls.right.y)?s.controls.right.y:s.y}},getControlPoints:function(t,e,n){var s=y(t,e),o=y(n,e);t=m(t,e),n=m(n,e);var c=(s+o)/2;return e.u=_.isObject(e.controls.left)?e.controls.left:new v.Vector(0,0),e.v=_.isObject(e.controls.right)?e.controls.right:new v.Vector(0,0),1e-4>t||1e-4>n?(e._relative||(e.controls.left.copy(e),e.controls.right.copy(e)),e):(t*=.33,n*=.33,c=s>o?c+l:c-l,e.controls.left.x=r(c)*t,e.controls.left.y=i(c)*t,c-=a,e.controls.right.x=r(c)*n,e.controls.right.y=i(c)*n,e._relative||(e.controls.left.x+=e.x,e.controls.left.y+=e.y,e.controls.right.x+=e.x,e.controls.right.y+=e.y),e)},getReflection:function(t,e,n){return new v.Vector(2*t.x-(e.x+t.x)-(n?t.x:0),2*t.y-(e.y+t.y)-(n?t.y:0))},angleBetween:function(t,e){var n,i;return 4<=arguments.length?(n=arguments[0]-arguments[2],i=arguments[1]-arguments[3],s(i,n)):(n=t.x-e.x,i=t.y-e.y,s(i,n))},distanceBetweenSquared:function(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},distanceBetween:function(t,e){return o(g(t,e))},toFixed:function(t){return Math.floor(1e3*t)/1e3},mod:function(t,e){for(;0>t;)t+=e;return t%e},Collection:function(){Array.call(this),1<arguments.length?Array.prototype.push.apply(this,arguments):arguments[0]&&Array.isArray(arguments[0])&&Array.prototype.push.apply(this,arguments[0])},Error:function(t){this.name="two.js",this.message=t}}}),v.Utils.Error.prototype=Error(),v.Utils.Error.prototype.constructor=v.Utils.Error,v.Utils.Collection.prototype=[],v.Utils.Collection.constructor=v.Utils.Collection,_.extend(v.Utils.Collection.prototype,Backbone.Events,{pop:function(){var t=Array.prototype.pop.apply(this,arguments);return this.trigger(v.Events.remove,[t]),t},shift:function(){var t=Array.prototype.shift.apply(this,arguments);return this.trigger(v.Events.remove,[t]),t},push:function(){var t=Array.prototype.push.apply(this,arguments);return this.trigger(v.Events.insert,arguments),t},unshift:function(){var t=Array.prototype.unshift.apply(this,arguments);return this.trigger(v.Events.insert,arguments),t},splice:function(){var t=Array.prototype.splice.apply(this,arguments),e;return this.trigger(v.Events.remove,t),2<arguments.length&&(e=this.slice(arguments[0],arguments.length-2),this.trigger(v.Events.insert,e)),t}});var m=v.Utils.distanceBetween,g=v.Utils.distanceBetweenSquared,y=v.Utils.angleBetween,b=v.Utils.getControlPoints,x=v.Utils.mod,E=v.Utils.getBackingStoreRatio,w=v.Utils.getPointOnCubicBezier,A=v.Utils.integrate,C=v.Utils.getReflection;_.extend(v.prototype,Backbone.Events,{appendTo:function(t){return t.appendChild(this.renderer.domElement),this},play:function(){return v.Utils.setPlaying.call(this,!0),this.trigger(v.Events.play)},pause:function(){return this.playing=!1,this.trigger(v.Events.pause)},update:function(){var t=!!this._lastFrame,n=(e.performance&&e.performance.now?e.performance:Date).now();this.frameCount++,t&&(this.timeDelta=parseFloat((n-this._lastFrame).toFixed(3))),this._lastFrame=n;var t=this.width,n=this.height,i=this.renderer;return(t!==i.width||n!==i.height)&&i.setSize(t,n,this.ratio),this.trigger(v.Events.update,this.frameCount,this.timeDelta),this.render()},render:function(){return this.renderer.render(),this.trigger(v.Events.render,this.frameCount)},add:function(t){var e=t;return _.isArray(t)||(e=_.toArray(arguments)),this.scene.add(e),this},remove:function(t){var e=t;return _.isArray(t)||(e=_.toArray(arguments)),this.scene.remove(e),this},clear:function(){return this.scene.remove(_.toArray(this.scene.children)),this},makeLine:function(t,e,n,i){n=(n-t)/2,i=(i-e)/2;var r=[new v.Anchor(-n,-i),new v.Anchor(n,i)],r=new v.Polygon(r).noFill();return r.translation.set(t+n,e+i),this.scene.add(r),r},makeRectangle:function(t,e,n,i){return n/=2,i/=2,i=[new v.Anchor(-n,-i),new v.Anchor(n,-i),new v.Anchor(n,i),new v.Anchor(-n,i)],i=new v.Polygon(i,!0),i.translation.set(t,e),this.scene.add(i),i},makeCircle:function(t,e,n){return this.makeEllipse(t,e,n,n)},makeEllipse:function(t,e,n,s){var o=v.Resolution,a=_.map(_.range(o),function(t){var e=t/o*c;return t=n*r(e),e=s*i(e),new v.Anchor(t,e)},this),a=new v.Polygon(a,!0,!0);return a.translation.set(t,e),this.scene.add(a),a},makeCurve:function(t){var e=arguments.length,n=t;if(!_.isArray(t))for(var n=[],i=0;e>i;i+=2){var r=arguments[i];if(!_.isNumber(r))break;n.push(new v.Anchor(r,arguments[i+1]))}var e=arguments[e-1],n=new v.Polygon(n,!(_.isBoolean(e)&&e),!0),e=n.getBoundingClientRect(),s=e.left+e.width/2,o=e.top+e.height/2;return _.each(n.vertices,function(t){t.x-=s,t.y-=o}),n.translation.set(s,o),this.scene.add(n),n},makePolygon:function(t){var e=arguments.length,n=t;if(!_.isArray(t))for(var n=[],i=0;e>i;i+=2){var r=arguments[i];if(!_.isNumber(r))break;n.push(new v.Anchor(r,arguments[i+1]))}return e=arguments[e-1],n=new v.Polygon(n,!(_.isBoolean(e)&&e)),e=n.getBoundingClientRect(),n.center().translation.set(e.left+e.width/2,e.top+e.height/2),this.scene.add(n),n},makeGroup:function(t){var e=t;_.isArray(t)||(e=_.toArray(arguments));var n=new v.Group;return this.scene.add(n),n.add(e),n},interpret:function(t,e){var n=t.tagName.toLowerCase();return n in v.Utils.read?(n=v.Utils.read[n].call(this,t),this.add(e&&n instanceof v.Group?_.values(n.children):n),n):null}}),function(){requestAnimationFrame(arguments.callee),v.Instances.forEach(function(t){t.playing&&t.update()})}(),"function"==typeof define&&define.amd?define(function(){return v}):"undefined"!=typeof module&&module.exports&&(module.exports=v)}(),function(t){var e=t.Vector=function(t,e){this.x=t||0,this.y=e||0};_.extend(e,{zero:new t.Vector}),_.extend(e.prototype,Backbone.Events,{set:function(t,e){return this.x=t,this.y=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this},clear:function(){return this.y=this.x=0,this},clone:function(){return new e(this.x,this.y)},add:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addSelf:function(t){return this.x+=t.x,this.y+=t.y,this},sub:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},subSelf:function(t){return this.x-=t.x,this.y-=t.y,this},multiplySelf:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divideScalar:function(t){return t?(this.x/=t,this.y/=t):this.set(0,0),this},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this.x*t.x+this.y*t.y},lengthSquared:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return t=this.y-t.y,e*e+t*t},setLength:function(t){return this.normalize().multiplyScalar(t)},equals:function(t){return 1e-4>this.distanceTo(t)},lerp:function(t,e){return this.set((t.x-this.x)*e+this.x,(t.y-this.y)*e+this.y)},isZero:function(){return 1e-4>this.length()},toString:function(){return this.x+","+this.y},toObject:function(){return{x:this.x,y:this.y}}});var n={set:function(e,n){return this._x=e,this._y=n,this.trigger(t.Events.change)},copy:function(e){return this._x=e.x,this._y=e.y,this.trigger(t.Events.change)},clear:function(){return this._y=this._x=0,this.trigger(t.Events.change)},clone:function(){return new e(this._x,this._y)},add:function(e,n){return this._x=e.x+n.x,this._y=e.y+n.y,this.trigger(t.Events.change)},addSelf:function(e){return this._x+=e.x,this._y+=e.y,this.trigger(t.Events.change)},sub:function(e,n){return this._x=e.x-n.x,this._y=e.y-n.y,this.trigger(t.Events.change)},subSelf:function(e){return this._x-=e.x,this._y-=e.y,this.trigger(t.Events.change)},multiplySelf:function(e){return this._x*=e.x,this._y*=e.y,this.trigger(t.Events.change)},multiplyScalar:function(e){return this._x*=e,this._y*=e,this.trigger(t.Events.change)},divideScalar:function(e){return e?(this._x/=e,this._y/=e,this.trigger(t.Events.change)):this.clear()},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this._x*t.x+this._y*t.y},lengthSquared:function(){return this._x*this._x+this._y*this._y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this._x-t.x;return t=this._y-t.y,e*e+t*t},setLength:function(t){return this.normalize().multiplyScalar(t)},equals:function(t){return 1e-4>this.distanceTo(t)},lerp:function(t,e){return this.set((t.x-this._x)*e+this._x,(t.y-this._y)*e+this._y)},isZero:function(){return 1e-4>this.length()},toString:function(){return this._x+","+this._y},toObject:function(){return{x:this._x,y:this._y}}},i={get:function(){return this._x},set:function(e){this._x=e,this.trigger(t.Events.change,"x")}},r={get:function(){return this._y},set:function(e){this._y=e,this.trigger(t.Events.change,"y")}};t.Vector.prototype.bind=t.Vector.prototype.on=function(){return this._bound||(this._x=this.x,this._y=this.y,Object.defineProperty(this,"x",i),Object.defineProperty(this,"y",r),_.extend(this,n),this._bound=!0),Backbone.Events.bind.apply(this,arguments),this}}(Two),function(t){var e=t.Commands,n=t.Anchor=function(i,r,s,o,a,c,l){return t.Vector.call(this,i,r),this._broadcast=_.bind(function(){this.trigger(t.Events.change)},this),this._command=l||e.move,this._relative=!0,l?(n.AppendCurveProperties(this),_.isNumber(s)&&(this.controls.left.x=s),_.isNumber(o)&&(this.controls.left.y=o),_.isNumber(a)&&(this.controls.right.x=a),void(_.isNumber(c)&&(this.controls.right.y=c))):this};_.extend(n,{AppendCurveProperties:function(e){e.controls={left:new t.Vector(0,0),right:new t.Vector(0,0)}}});var i={listen:function(){return _.isObject(this.controls)||n.AppendCurveProperties(this),this.controls.left.bind(t.Events.change,this._broadcast),this.controls.right.bind(t.Events.change,this._broadcast),this},ignore:function(){return this.controls.left.unbind(t.Events.change,this._broadcast),this.controls.right.unbind(t.Events.change,this._broadcast),this},clone:function(){var e=this.controls,e=new t.Anchor(this.x,this.y,e&&e.left.x,e&&e.left.y,e&&e.right.x,e&&e.right.y,this.command);return e.relative=this._relative,e},toObject:function(){var t={x:this.x,y:this.y};return this._command&&(t.command=this._command),this._relative&&(t.relative=this._relative),this.controls&&(t.controls={left:this.controls.left.toObject(),right:this.controls.right.toObject()}),t}};Object.defineProperty(n.prototype,"command",{get:function(){return this._command},set:function(i){return this._command=i,this._command===e.curve&&!_.isObject(this.controls)&&n.AppendCurveProperties(this),this.trigger(t.Events.change)}}),Object.defineProperty(n.prototype,"relative",{get:function(){return this._relative},set:function(e){return this._relative==e?this:(this._relative=!!e,this.trigger(t.Events.change))}}),_.extend(n.prototype,t.Vector.prototype,i),t.Anchor.prototype.bind=t.Anchor.prototype.on=function(){t.Vector.prototype.bind.apply(this,arguments),_.extend(this,i)},t.Anchor.prototype.unbind=t.Anchor.prototype.off=function(){t.Vector.prototype.unbind.apply(this,arguments),_.extend(this,i)}}(Two),function(t){var e=Math.cos,n=Math.sin,i=Math.tan,r=t.Matrix=function(e,n,i,r,s,o){this.elements=new t.Array(9);var a=e;_.isArray(a)||(a=_.toArray(arguments)),this.identity().set(a)};_.extend(r,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(e,n,i){if(3>=n.length){i=n[0]||0;var r=n[1]||0;return n=n[2]||0,{x:e[0]*i+e[1]*r+e[2]*n,y:e[3]*i+e[4]*r+e[5]*n,z:e[6]*i+e[7]*r+e[8]*n}}var r=e[0],s=e[1],o=e[2],a=e[3],c=e[4],l=e[5],u=e[6],h=e[7];e=e[8];var f=n[0],d=n[1],p=n[2],v=n[3],m=n[4],g=n[5],_=n[6],y=n[7];return n=n[8],i=i||new t.Array(9),i[0]=r*f+s*v+o*_,i[1]=r*d+s*m+o*y,i[2]=r*p+s*g+o*n,i[3]=a*f+c*v+l*_,i[4]=a*d+c*m+l*y,i[5]=a*p+c*g+l*n,i[6]=u*f+h*v+e*_,i[7]=u*d+h*m+e*y,i[8]=u*p+h*g+e*n,i}}),_.extend(r.prototype,Backbone.Events,{set:function(e){var n=e;return _.isArray(n)||(n=_.toArray(arguments)),_.extend(this.elements,n),this.trigger(t.Events.change)},identity:function(){return this.set(r.Identity),this},multiply:function(e,n,i,r,s,o,a,c,l){var u=arguments,h=u.length;if(1>=h)return _.each(this.elements,function(t,n){this.elements[n]=t*e},this),this.trigger(t.Events.change);if(3>=h)return e=e||0,n=n||0,i=i||0,s=this.elements,{x:s[0]*e+s[1]*n+s[2]*i,y:s[3]*e+s[4]*n+s[5]*i,z:s[6]*e+s[7]*n+s[8]*i};var f=this.elements,d=u,u=f[0],h=f[1],p=f[2],v=f[3],m=f[4],g=f[5],y=f[6],b=f[7],f=f[8],x=d[0],E=d[1],w=d[2],A=d[3],C=d[4],T=d[5],S=d[6],P=d[7],d=d[8];return this.elements[0]=u*x+h*A+p*S,this.elements[1]=u*E+h*C+p*P,this.elements[2]=u*w+h*T+p*d,this.elements[3]=v*x+m*A+g*S,this.elements[4]=v*E+m*C+g*P,this.elements[5]=v*w+m*T+g*d,this.elements[6]=y*x+b*A+f*S,this.elements[7]=y*E+b*C+f*P,this.elements[8]=y*w+b*T+f*d,this.trigger(t.Events.change)},inverse:function(e){var n=this.elements;e=e||new t.Matrix;var i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],c=n[5],l=n[6],u=n[7],n=n[8],h=n*a-c*u,f=-n*o+c*l,d=u*o-a*l,p=i*h+r*f+s*d;return p?(p=1/p,e.elements[0]=h*p,e.elements[1]=(-n*r+s*u)*p,e.elements[2]=(c*r-s*a)*p,e.elements[3]=f*p,e.elements[4]=(n*i-s*l)*p,e.elements[5]=(-c*i+s*o)*p,e.elements[6]=d*p,e.elements[7]=(-u*i+r*l)*p,e.elements[8]=(a*i-r*o)*p,e):null},scale:function(t,e){return 1>=arguments.length&&(e=t),this.multiply(t,0,0,0,e,0,0,0,1)},rotate:function(t){var i=e(t);return t=n(t),this.multiply(i,-t,0,t,i,0,0,0,1)},translate:function(t,e){return this.multiply(1,0,t,0,1,e,0,0,1)},skewX:function(t){return t=i(t),this.multiply(1,t,0,0,1,0,0,0,1)},skewY:function(t){return t=i(t),this.multiply(1,0,0,t,1,0,0,0,1)},toString:function(t){var e=[];return this.toArray(t,e),e.join(" ")},toArray:function(t,e){var n=this.elements,i=!!e,r=parseFloat(n[0].toFixed(3)),s=parseFloat(n[1].toFixed(3)),o=parseFloat(n[2].toFixed(3)),a=parseFloat(n[3].toFixed(3)),c=parseFloat(n[4].toFixed(3)),l=parseFloat(n[5].toFixed(3));if(t){var u=parseFloat(n[6].toFixed(3)),h=parseFloat(n[7].toFixed(3)),n=parseFloat(n[8].toFixed(3));return i?(e[0]=r,e[1]=a,e[2]=u,e[3]=s,e[4]=c,e[5]=h,e[6]=o,e[7]=l,void(e[8]=n)):[r,a,u,s,c,h,o,l,n]}return i?(e[0]=r,e[1]=a,e[2]=s,e[3]=c,e[4]=o,e[5]=l,void 0):[r,a,s,c,o,l]},clone:function(){return new t.Matrix(this.elements[0],this.elements[1],this.elements[2],this.elements[3],this.elements[4],this.elements[5],this.elements[6],this.elements[7],this.elements[8])}})}(Two),function(t){var e=t.Utils.mod,n=t.Utils.toFixed,i={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",createElement:function(t,e){var n=document.createElementNS(this.ns,t);return"svg"===t&&(e=_.defaults(e||{},{version:this.version})),_.isObject(e)&&i.setAttributes(n,e),n},setAttributes:function(t,e){for(var n in e)t.setAttribute(n,e[n]);return this},removeAttributes:function(t,e){for(var n in e)t.removeAttribute(n);return this},toString:function(i,r){for(var s=i.length,o=s-1,a,c="",l=0;s>l;l++){var u=i[l],h,f=r?e(l-1,s):Math.max(l-1,0),d=r?e(l+1,s):Math.min(l+1,o);h=i[f];var p=i[d],v,m,g,f=n(u._x),p=n(u._y);switch(u._command){case t.Commands.close:h=t.Commands.close;break;case t.Commands.curve:v=h.controls&&h.controls.right||h,g=u.controls&&u.controls.left||u,h._relative?(d=n(v.x+h.x),v=n(v.y+h.y)):(d=n(v.x),v=n(v.y)),u._relative?(m=n(g.x+u.x),g=n(g.y+u.y)):(m=n(g.x),g=n(g.y)),h=(0===l?t.Commands.move:t.Commands.curve)+" "+d+" "+v+" "+m+" "+g+" "+f+" "+p;break;case t.Commands.move:a=u,h=t.Commands.move+" "+f+" "+p;break;default:h=u._command+" "+f+" "+p}l>=o&&r&&(u._command===t.Commands.curve&&(p=a,v=u.controls&&u.controls.right||u,f=p.controls&&p.controls.left||p,u._relative?(d=n(v.x+u.x),v=n(v.y+u.y)):(d=n(v.x),v=n(v.y)),p._relative?(m=n(f.x+p.x),g=n(f.y+p.y)):(m=n(f.x),g=n(f.y)),f=n(p.x),p=n(p.y),h+=" C "+d+" "+v+" "+m+" "+g+" "+f+" "+p),h+=" Z"),c+=h+" "}return c},getClip:function(t){if(clip=t._renderer.clip,!clip){for(root=t;root.parent;)root=root.parent;clip=t._renderer.clip=i.createElement("clipPath"),root.defs.appendChild(clip)}return clip},group:{appendChild:function(t){if(t=this.domElement.querySelector("#"+t)){var e=t.nodeName;e&&(e=e.replace(/svg\:/gi,"").toLowerCase(),/clippath/.test(e)||this.elem.appendChild(t))}},removeChild:function(t){if(t=this.domElement.querySelector("#"+t)){var e=t.nodeName;e&&(e=e.replace(/svg\:/gi,"").toLowerCase(),/clippath/.test(e)||this.elem.removeChild(t))}},renderChild:function(t){i[t._renderer.type].render.call(t,this)},render:function(t){if(this._update(),0===this._opacity&&!this._flagOpacity)return this;this._renderer.elem||(this._renderer.elem=i.createElement("g",{id:this.id}),t.appendChild(this._renderer.elem));var e={domElement:t,elem:this._renderer.elem};(this._matrix.manual||this._flagMatrix)&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");
for(var n in this.children){var r=this.children[n];i[r._renderer.type].render.call(r,t)}return this._flagOpacity&&this._renderer.elem.setAttribute("opacity",this._opacity),this._flagAdditions&&_.each(this.additions,i.group.appendChild,e),this._flagSubtractions&&_.each(this.subtractions,i.group.removeChild,e),this._flagMask&&(this._mask?this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")"):this._renderer.elem.removeAttribute("clip-path")),this.flagReset()}},polygon:{render:function(t){if(this._update(),0===this._opacity&&!this._flagOpacity)return this;var e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagVertices){var n=i.toString(this._vertices,this._closed);e.d=n}return this._flagFill&&(e.fill=this._fill),this._flagStroke&&(e.stroke=this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e["stroke-opacity"]=this._opacity,e["fill-opacity"]=this._opacity),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this._flagCap&&(e["stroke-linecap"]=this._cap),this._flagJoin&&(e["stroke-linejoin"]=this._join),this._flagMiter&&(e["stroke-miterlimit"]=this.miter),this._renderer.elem?i.setAttributes(this._renderer.elem,e):(e.id=this.id,this._renderer.elem=i.createElement("path",e),t.appendChild(this._renderer.elem)),this._flagClip&&(clip=i.getClip(this),elem=this._renderer.elem,this._clip?(elem.removeAttribute("id"),clip.setAttribute("id",this.id),clip.appendChild(elem)):(clip.removeAttribute("id"),elem.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(elem))),this.flagReset()}}},r=t[t.Types.svg]=function(e){this.domElement=e.domElement||i.createElement("svg"),this.scene=new t.Group,this.scene.parent=this,this.defs=i.createElement("defs"),this.domElement.appendChild(this.defs)};_.extend(r,{Utils:i}),_.extend(r.prototype,Backbone.Events,{setSize:function(t,e){return this.width=t,this.height=e,i.setAttributes(this.domElement,{width:t,height:e}),this},render:function(){return i.group.render.call(this.scene,this.domElement),this}})}(Two),function(t){var e=t.Utils.mod,n=t.Utils.toFixed,i=t.Utils.getRatio,r={group:{renderChild:function(t){r[t._renderer.type].render.call(t,this.ctx,!0,this.clip)},render:function(t){this._update();var e=this._matrix.elements,n=this.parent;return this._renderer.opacity=this._opacity*(n&&n._renderer?n._renderer.opacity:1),n=this._mask,this._renderer.context||(this._renderer.context={}),this._renderer.context.ctx=t,t.save(),t.transform(e[0],e[3],e[1],e[4],e[2],e[5]),n&&r[n._renderer.type].render.call(n,t,!0),_.each(this.children,r.group.renderChild,this._renderer.context),t.restore(),this.flagReset()}},polygon:{render:function(i,r,s){var o,a,c,l,u,h,f,d,p,v,m,g,y,b,x,E,w,A,C,T,S,P,k,M,O,R,F,U,L;return this._update(),o=this._matrix.elements,a=this._stroke,c=this._linewidth,l=this._fill,u=this._opacity*this.parent._renderer.opacity,h=this._visible,f=this._cap,d=this._join,p=this._miter,v=this._closed,m=this._vertices,g=m.length,y=g-1,L=this._clip,r||h&&!L?(i.save(),o&&i.transform(o[0],o[3],o[1],o[4],o[2],o[5]),l&&(i.fillStyle=l),a&&(i.strokeStyle=a),c&&(i.lineWidth=c),p&&(i.miterLimit=p),d&&(i.lineJoin=d),f&&(i.lineCap=f),_.isNumber(u)&&(i.globalAlpha=u),i.beginPath(),m.forEach(function(r,s){switch(F=n(r.x),U=n(r.y),r._command){case t.Commands.close:i.closePath();break;case t.Commands.curve:x=v?e(s-1,g):Math.max(s-1,0),b=v?e(s+1,g):Math.min(s+1,y),E=m[x],w=m[b],k=E.controls&&E.controls.right||E,M=r.controls&&r.controls.left||r,E._relative?(S=k.x+n(E.x),P=k.y+n(E.y)):(S=n(k.x),P=n(k.y)),r._relative?(C=M.x+n(r.x),T=M.y+n(r.y)):(C=n(M.x),T=n(M.y)),i.bezierCurveTo(S,P,C,T,F,U),s>=y&&v&&(w=A,O=r.controls&&r.controls.right||r,R=w.controls&&w.controls.left||w,r._relative?(S=O.x+n(r.x),P=O.y+n(r.y)):(S=n(O.x),P=n(O.y)),w._relative?(C=R.x+n(w.x),T=R.y+n(w.y)):(C=n(R.x),T=n(R.y)),F=n(w.x),U=n(w.y),i.bezierCurveTo(S,P,C,T,F,U));break;case t.Commands.line:i.lineTo(F,U);break;case t.Commands.move:A=r,i.moveTo(F,U)}}),v&&i.closePath(),!L&&!s&&(i.fill(),i.stroke()),i.restore(),L&&!s&&i.clip(),this.flagReset()):this}}},s=t[t.Types.canvas]=function(e){this.domElement=e.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=e.overdraw||!1,this.scene=new t.Group,this.scene.parent=this};_.extend(s,{Utils:r}),_.extend(s.prototype,Backbone.Events,{setSize:function(t,e,n){return this.width=t,this.height=e,this.ratio=_.isUndefined(n)?i(this.ctx):n,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,_.extend(this.domElement.style,{width:t+"px",height:e+"px"}),this},render:function(){var t=1===this.ratio;return t||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),r.group.render.call(this.scene,this.ctx),t||this.ctx.restore(),this}})}(Two),function(t){var e=t.Matrix.Multiply,n=t.Utils.mod,i=[1,0,0,0,1,0,0,0,1],r=new t.Array(9),s=t.Utils.getRatio,o=t.Utils.toFixed,a={canvas:document.createElement("canvas"),uv:new t.Array([0,0,1,0,0,1,0,1,1,0,1,1]),group:{renderChild:function(t){a[t._renderer.type].render.call(t,this.gl,this.program)},render:function(n,i){this._update();var s=this.parent,o=s._matrix&&s._matrix.manual||s._flagMatrix,c=this._matrix.manual||this._flagMatrix;return(o||c)&&(this._renderer.matrix||(this._renderer.matrix=new t.Array(9)),this._matrix.toArray(!0,r),e(r,s._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*s._renderer.scale,o&&(this._flagMatrix=!0)),this._mask&&(n.enable(n.STENCIL_TEST),n.stencilFunc(n.ALWAYS,1,1),n.colorMask(!1,!1,!1,!0),n.stencilOp(n.KEEP,n.KEEP,n.INCR),a[this._mask._renderer.type].render.call(this._mask,n,i,this),n.colorMask(!0,!0,!0,!0),n.stencilFunc(n.NOTEQUAL,0,1),n.stencilOp(n.KEEP,n.KEEP,n.KEEP)),this._flagOpacity=s._flagOpacity||this._flagOpacity,this._renderer.opacity=this._opacity*(s&&s._renderer?s._renderer.opacity:1),_.each(this.children,a.group.renderChild,{gl:n,program:i}),this._mask&&(n.colorMask(!1,!1,!1,!1),n.stencilOp(n.KEEP,n.KEEP,n.DECR),a[this._mask._renderer.type].render.call(this._mask,n,i,this),n.colorMask(!0,!0,!0,!0),n.stencilFunc(n.NOTEQUAL,0,1),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.disable(n.STENCIL_TEST)),this.flagReset()}},polygon:{render:function(n,i,s){if(!this._visible||!this._opacity)return this;var o=this.parent,c=o._matrix.manual||o._flagMatrix,l=this._matrix.manual||this._flagMatrix,u=this._flagVertices||this._flagFill||this._flagStroke||this._flagLinewidth||this._flagOpacity||o._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale;return this._update(),(c||l)&&(this._renderer.matrix||(this._renderer.matrix=new t.Array(9)),this._matrix.toArray(!0,r),e(r,o._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*o._renderer.scale),u&&(this._renderer.rect||(this._renderer.rect={}),this._renderer.triangles||(this._renderer.triangles=new t.Array(12)),this._renderer.opacity=this._opacity*o._renderer.opacity,a.getBoundingClientRect(this._vertices,this._linewidth,this._renderer.rect),a.getTriangles(this._renderer.rect,this._renderer.triangles),a.updateBuffer(n,this,i),a.updateTexture(n,this)),!this._clip||s?(n.bindBuffer(n.ARRAY_BUFFER,this._renderer.textureCoordsBuffer),n.vertexAttribPointer(i.textureCoords,2,n.FLOAT,!1,0,0),n.bindTexture(n.TEXTURE_2D,this._renderer.texture),n.uniformMatrix3fv(i.matrix,!1,this._renderer.matrix),n.bindBuffer(n.ARRAY_BUFFER,this._renderer.buffer),n.vertexAttribPointer(i.position,2,n.FLOAT,!1,0,0),n.drawArrays(n.TRIANGLES,0,6),this.flagReset()):void 0}},getBoundingClientRect:function(t,e,n){var i=1/0,r=-1/0,s=1/0,o=-1/0;t.forEach(function(t){var e=t.x,n=t.y,a=t.controls,c,l;s=Math.min(n,s),i=Math.min(e,i),r=Math.max(e,r),o=Math.max(n,o),t.controls&&(c=a.left,l=a.right,c&&l&&(a=t._relative?c.x+e:c.x,c=t._relative?c.y+n:c.y,e=t._relative?l.x+e:l.x,t=t._relative?l.y+n:l.y,a&&c&&e&&t&&(s=Math.min(c,t,s),i=Math.min(a,e,i),r=Math.max(a,e,r),o=Math.max(c,t,o))))}),_.isNumber(e)&&(s-=e,i-=e,r+=e,o+=e),n.top=s,n.left=i,n.right=r,n.bottom=o,n.width=r-i,n.height=o-s,n.centroid||(n.centroid={}),n.centroid.x=-i,n.centroid.y=-s},getTriangles:function(t,e){var n=t.top,i=t.left,r=t.right,s=t.bottom;e[0]=i,e[1]=n,e[2]=r,e[3]=n,e[4]=i,e[5]=s,e[6]=i,e[7]=s,e[8]=r,e[9]=n,e[10]=r,e[11]=s},updateCanvas:function(e){var i=e._vertices,r=this.canvas,s=this.ctx,a=e._renderer.scale,c=e._stroke,l=e._linewidth*a,u=e._fill,h=e._renderer.opacity||e._opacity,f=e._cap,d=e._join,p=e._miter,v=e._closed,m=i.length,g=m-1;r.width=Math.max(Math.ceil(e._renderer.rect.width*a),1),r.height=Math.max(Math.ceil(e._renderer.rect.height*a),1),e=e._renderer.rect.centroid;var y=e.x*a,b=e.y*a;s.clearRect(0,0,r.width,r.height),u&&(s.fillStyle=u),c&&(s.strokeStyle=c),l&&(s.lineWidth=l),p&&(s.miterLimit=p),d&&(s.lineJoin=d),f&&(s.lineCap=f),_.isNumber(h)&&(s.globalAlpha=h);var x;s.beginPath(),i.forEach(function(e,r){var c,l,u,h,f,d;switch(d=o(e.x*a+y),u=o(e.y*a+b),e._command){case t.Commands.close:s.closePath();break;case t.Commands.curve:c=v?n(r-1,m):Math.max(r-1,0),v?n(r+1,m):Math.min(r+1,g),l=i[c],f=l.controls&&l.controls.right||l,h=e.controls&&e.controls.left||e,l._relative?(c=o((f.x+l.x)*a+y),f=o((f.y+l.y)*a+b)):(c=o(f.x*a+y),f=o(f.y*a+b)),e._relative?(l=o((h.x+e.x)*a+y),h=o((h.y+e.y)*a+b)):(l=o(h.x*a+y),h=o(h.y*a+b)),s.bezierCurveTo(c,f,l,h,d,u),r>=g&&v&&(u=x,l=e.controls&&e.controls.right||e,d=u.controls&&u.controls.left||u,e._relative?(c=o((l.x+e.x)*a+y),f=o((l.y+e.y)*a+b)):(c=o(l.x*a+y),f=o(l.y*a+b)),u._relative?(l=o((d.x+u.x)*a+y),h=o((d.y+u.y)*a+b)):(l=o(d.x*a+y),h=o(d.y*a+b)),d=o(u.x*a+y),u=o(u.y*a+b),s.bezierCurveTo(c,f,l,h,d,u));break;case t.Commands.line:s.lineTo(d,u);break;case t.Commands.move:x=e,s.moveTo(d,u)}}),v&&s.closePath(),s.fill(),s.stroke()},updateTexture:function(t,e){this.updateCanvas(e),e._renderer.texture&&t.deleteTexture(e._renderer.texture),t.bindBuffer(t.ARRAY_BUFFER,e._renderer.textureCoordsBuffer),e._renderer.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,e._renderer.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),0>=this.canvas.width||0>=this.canvas.height||t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.canvas)},updateBuffer:function(t,e,n){_.isObject(e._renderer.buffer)&&t.deleteBuffer(e._renderer.buffer),e._renderer.buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e._renderer.buffer),t.enableVertexAttribArray(n.position),t.bufferData(t.ARRAY_BUFFER,e._renderer.triangles,t.STATIC_DRAW),_.isObject(e._renderer.textureCoordsBuffer)&&t.deleteBuffer(e._renderer.textureCoordsBuffer),e._renderer.textureCoordsBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e._renderer.textureCoordsBuffer),t.enableVertexAttribArray(n.textureCoords),t.bufferData(t.ARRAY_BUFFER,this.uv,t.STATIC_DRAW)},program:{create:function(e,n){var i,r;if(i=e.createProgram(),_.each(n,function(t){e.attachShader(i,t)}),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw r=e.getProgramInfoLog(i),e.deleteProgram(i),new t.Utils.Error("unable to link program: "+r);return i}},shaders:{create:function(e,n,i){if(i=e.createShader(e[i]),e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw n=e.getShaderInfoLog(i),e.deleteShader(i),new t.Utils.Error("unable to compile shader "+i+": "+n);return i},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},vertex:"attribute vec2 a_position;\nattribute vec2 a_textureCoords;\n\nuniform mat3 u_matrix;\nuniform vec2 u_resolution;\n\nvarying vec2 v_textureCoords;\n\nvoid main() {\n   vec2 projected = (u_matrix * vec3(a_position, 1.0)).xy;\n   vec2 normal = projected / u_resolution;\n   vec2 clipspace = (normal * 2.0) - 1.0;\n\n   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);\n   v_textureCoords = a_textureCoords;\n}",fragment:"precision mediump float;\n\nuniform sampler2D u_image;\nvarying vec2 v_textureCoords;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_textureCoords);\n}"}};a.ctx=a.canvas.getContext("2d");var c=t[t.Types.webgl]=function(e){var n,r;if(this.domElement=e.domElement||document.createElement("canvas"),this.scene=new t.Group,this.scene.parent=this,this._renderer={matrix:new t.Array(i),scale:1,opacity:1},this._flagMatrix=!0,e=_.defaults(e||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!0,overdraw:!1}),this.overdraw=e.overdraw,e=this.ctx=this.domElement.getContext("webgl",e)||this.domElement.getContext("experimental-webgl",e),!this.ctx)throw new t.Utils.Error("unable to create a webgl context. Try using another renderer.");n=a.shaders.create(e,a.shaders.vertex,a.shaders.types.vertex),r=a.shaders.create(e,a.shaders.fragment,a.shaders.types.fragment),this.program=a.program.create(e,[n,r]),e.useProgram(this.program),this.program.position=e.getAttribLocation(this.program,"a_position"),this.program.matrix=e.getUniformLocation(this.program,"u_matrix"),this.program.textureCoords=e.getAttribLocation(this.program,"a_textureCoords"),e.disable(e.DEPTH_TEST),e.enable(e.BLEND),e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)};_.extend(c.prototype,Backbone.Events,{setSize:function(t,e,n){return this.width=t,this.height=e,this.ratio=_.isUndefined(n)?s(this.ctx):n,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,_.extend(this.domElement.style,{width:t+"px",height:e+"px"}),t*=this.ratio,e*=this.ratio,this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio,this._flagMatrix=!0,this.ctx.viewport(0,0,t,e),n=this.ctx.getUniformLocation(this.program,"u_resolution"),this.ctx.uniform2f(n,t,e),this},render:function(){var t=this.ctx;return this.overdraw||t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),a.group.render.call(this.scene,t,this.program),this._flagMatrix=!1,this}})}(Two),function(t){var e=t.Shape=function(){this._renderer={},this.id=t.Identifier+t.uniqueId(),this.classList=[],this._matrix=new t.Matrix,this.translation=new t.Vector,this.translation.bind(t.Events.change,_.bind(e.FlagMatrix,this)),this.rotation=0,this.scale=1};_.extend(e,Backbone.Events,{FlagMatrix:function(){this._flagMatrix=!0},MakeObservable:function(t){Object.defineProperty(t,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t,this._flagMatrix=!0}}),Object.defineProperty(t,"scale",{get:function(){return this._scale},set:function(t){this._scale=t,this._flagScale=this._flagMatrix=!0}})}}),_.extend(e.prototype,{_flagMatrix:!0,_rotation:0,_scale:1,addTo:function(t){return t.add(this),this},clone:function(){var t=new e;return t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,_.each(e.Properties,function(e){t[e]=this[e]},this),t._update()},replaceParent:function(t){var e=this.id,n;return this.parent&&(delete this.parent.children[e],n=_.indexOf(parent.additions,e),n>=0&&this.parent.additions.splice(n,1),this.parent.subtractions.push(e),this._flagSubtractions=!0),t?(t.children[e]=this,this.parent=t,t.additions.push(e),t._flagAdditions=!0):delete this.parent,this},_update:function(t){return!this._matrix.manual&&this._flagMatrix&&this._matrix.identity().translate(this.translation.x,this.translation.y).scale(this.scale).rotate(this.rotation),t&&this.parent&&this.parent._update&&this.parent._update(),this},flagReset:function(){return this._flagMatrix=this._flagScale=!1,this}}),e.MakeObservable(e.prototype)}(Two),function(t){function e(e,n,i){var r,s,o,a,c,l,u,h,f=n.controls&&n.controls.right,d=e.controls&&e.controls.left;return r=n.x,c=n.y,s=(f||n).x,l=(f||n).y,o=(d||e).x,u=(d||e).y,a=e.x,h=e.y,f&&n._relative&&(s+=n.x,l+=n.y),d&&e._relative&&(o+=e.x,u+=e.y),t.Utils.getCurveLength(r,c,s,l,o,u,a,h,i)}function n(e,n,i){var r,s,o,a,c,l,u,h,f=n.controls&&n.controls.right,d=e.controls&&e.controls.left;return r=n.x,c=n.y,s=(f||n).x,l=(f||n).y,o=(d||e).x,u=(d||e).y,a=e.x,h=e.y,f&&n._relative&&(s+=n.x,l+=n.y),d&&e._relative&&(o+=e.x,u+=e.y),t.Utils.subdivide(r,c,s,l,o,u,a,h,i)}var i=Math.min,r=Math.max,s=Math.round,o=t.Utils.getComputedMatrix;_.each(t.Commands,function(){});var a=t.Polygon=function(e,n,i,r){t.Shape.call(this),this._renderer.type="polygon",this._closed=!!n,this._curved=!!i,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.opacity=this.linewidth=1,this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this._vertices=[],this.vertices=e,this.automatic=!r};_.extend(a,{Properties:"fill stroke linewidth opacity visible cap join miter closed curved automatic beginning ending".split(" "),FlagVertices:function(){this._flagLength=this._flagVertices=!0},MakeObservable:function(e){t.Shape.MakeObservable(e),_.each(a.Properties.slice(0,8),function(t){var n="_"+t,i="_flag"+t.charAt(0).toUpperCase()+t.slice(1);Object.defineProperty(e,t,{get:function(){return this[n]},set:function(t){this[n]=t,this[i]=!0}})}),Object.defineProperty(e,"length",{get:function(){return this._flagLength&&this._updateLength(),this._length}}),Object.defineProperty(e,"closed",{get:function(){return this._closed},set:function(t){this._closed=!!t,this._flagVertices=!0}}),Object.defineProperty(e,"curved",{get:function(){return this._curved},set:function(t){this._curved=!!t,this._flagVertices=!0}}),Object.defineProperty(e,"automatic",{get:function(){return this._automatic},set:function(t){if(t!==this._automatic){var e=(this._automatic=!!t)?"ignore":"listen";_.each(this.vertices,function(t){t[e]()})}}}),Object.defineProperty(e,"beginning",{get:function(){return this._beginning},set:function(t){this._beginning=i(r(t,0),this._ending),this._flagVertices=!0}}),Object.defineProperty(e,"ending",{get:function(){return this._ending},set:function(t){this._ending=i(r(t,this._beginning),1),this._flagVertices=!0}}),Object.defineProperty(e,"vertices",{get:function(){return this._collection},set:function(e){var n=_.bind(a.FlagVertices,this),i=_.bind(function(e){for(var i=e.length;i--;)e[i].bind(t.Events.change,n);n()},this),r=_.bind(function(e){_.each(e,function(e){e.unbind(t.Events.change,n)},this),n()},this);this._collection&&this._collection.unbind(),this._collection=new t.Utils.Collection(e.slice(0)),this._collection.bind(t.Events.insert,i),this._collection.bind(t.Events.remove,r),i(this._collection)}}),Object.defineProperty(e,"clip",{get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}})}}),_.extend(a.prototype,t.Shape.prototype,{_flagVertices:!0,_flagLength:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagCap:!0,_flagJoin:!0,_flagMiter:!0,_flagClip:!1,_length:0,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_clip:!1,clone:function(e){e=e||this.parent;var n=_.map(this.vertices,function(t){return t.clone()}),i=new a(n,this.closed,this.curved,!this.automatic);return _.each(t.Shape.Properties,function(t){i[t]=this[t]},this),i.translation.copy(this.translation),i.rotation=this.rotation,i.scale=this.scale,e.add(i),i},toObject:function(){var e={vertices:_.map(this.vertices,function(t){return t.toObject()})};return _.each(t.Shape.Properties,function(t){e[t]=this[t]},this),e.translation=this.translation.toObject,e.rotation=this.rotation,e.scale=this.scale,e},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke="transparent",this},corner:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2,y:t.top+t.height/2},_.each(this.vertices,function(e){e.addSelf(t.centroid)}),this},center:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2,y:t.top+t.height/2},_.each(this.vertices,function(e){e.subSelf(t.centroid)}),this},remove:function(){return this.parent?(this.parent.remove(this),this):this},getBoundingClientRect:function(t){this._update(!0);var e=t?this._matrix:o(this),n=this.linewidth/2,s,a,c=1/0,l=-1/0,u=1/0,h=-1/0;return _.each(this._vertices,function(t){s=t.x,a=t.y,t=e.multiply(s,a,1),u=i(t.y-n,u),c=i(t.x-n,c),l=r(t.x+n,l),h=r(t.y+n,h)}),{top:u,left:c,right:l,bottom:h,width:l-c,height:h-u}},getPointAt:function(e,n){var i,r,s,o,a,c,l,u,h,f,d,p;for(l=this.length*Math.min(Math.max(e,0),1),u=this.vertices.length,h=u-1,c=i=null,f=0,r=this._lengths.length,s=0;r>f;f++){if(s+this._lengths[f]>l){i=this.vertices[this.closed?t.Utils.mod(f,u):f],c=this.vertices[Math.min(Math.max(f-1,0),h)],l-=s,e=l/this._lengths[f];break}s+=this._lengths[f]}return _.isNull(i)||_.isNull(c)?null:(p=c.controls&&c.controls.right,d=i.controls&&i.controls.left,r=c.x,l=c.y,s=(p||c).x,u=(p||c).y,o=(d||i).x,h=(d||i).y,a=i.x,f=i.y,p&&c._relative&&(s+=c.x,u+=c.y),d&&i._relative&&(o+=i.x,h+=i.y),i=t.Utils.getPointOnCubicBezier(e,r,s,o,a),c=t.Utils.getPointOnCubicBezier(e,l,u,h,f),_.isObject(n)?(n.x=i,n.y=c,n):new t.Vector(i,c))},plot:function(){if(this.curved)return t.Utils.getCurveFromPoints(this._vertices,this.closed),this;for(var e=0;e<this._vertices.length;e++)this._vertices[e]._command=0===e?t.Commands.move:t.Commands.line;return this},subdivide:function(e){this._update();var i=this.vertices.length-1,r=this.vertices[i],s=this._closed||this.vertices[i]._command===t.Commands.close,o=[];return _.each(this.vertices,function(a,c){if(!(0>=c)||s)if(a.command===t.Commands.move)o.push(new t.Anchor(r.x,r.y)),c>0&&(o[o.length-1].command=t.Commands.line);else{var l=n(a,r,e);o=o.concat(l),_.each(l,function(e,n){e.command=0>=n&&r.command===t.Commands.move?t.Commands.move:t.Commands.line}),c>=i&&(this._closed&&this._automatic?(r=a,l=n(a,r,e),o=o.concat(l),_.each(l,function(e,n){e.command=0>=n&&r.command===t.Commands.move?t.Commands.move:t.Commands.line})):s&&o.push(new t.Anchor(a.x,a.y)),o[o.length-1].command=s?t.Commands.close:t.Commands.line)}r=a},this),this._curved=this._automatic=!1,this.vertices=o,this},_updateLength:function(n){this._update();var i=this.vertices.length-1,r=this.vertices[i],s=this._closed||this.vertices[i]._command===t.Commands.close,o=0;return _.isUndefined(this._lengths)&&(this._lengths=[]),_.each(this.vertices,function(a,c){0>=c&&!s||a.command===t.Commands.move?(r=a,this._lengths[c]=0):(this._lengths[c]=e(a,r,n),o+=this._lengths[c],c>=i&&s&&(r=a,this._lengths[c+1]=e(a,r,n),o+=this._lengths[c+1]),r=a)},this),this._length=o,this},_update:function(){if(this._flagVertices){var e=this.vertices.length-1,n;n=s(this._beginning*e),e=s(this._ending*e),this._vertices.length=0;for(var i=n;e+1>i;i++)n=this.vertices[i],this._vertices.push(n);this._automatic&&this.plot()}return t.Shape.prototype._update.call(this),this},flagReset:function(){return this._flagVertices=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1,t.Shape.prototype.flagReset.call(this),this}}),a.MakeObservable(a.prototype)}(Two),function(t){var e=Math.min,n=Math.max,i=t.Group=function(){t.Shape.call(this,!0),this._renderer.type="group",this.additions=[],this.subtractions=[],this.children={}};_.extend(i,{MakeObservable:function(e){var n=t.Polygon.Properties.slice(0),r=_.indexOf(n,"opacity");r>=0&&(n.splice(r,1),Object.defineProperty(e,"opacity",{get:function(){return this._opacity},set:function(t){this._opacity=t,this._flagOpacity=!0}})),t.Shape.MakeObservable(e),i.MakeGetterSetters(e,n),Object.defineProperty(e,"mask",{get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,t.clip||(t.clip=!0)}})},MakeGetterSetters:function(t,e){_.isArray(e)||(e=[e]),_.each(e,function(e){i.MakeGetterSetter(t,e)})},MakeGetterSetter:function(t,e){var n="_"+e;Object.defineProperty(t,e,{get:function(){return this[n]},set:function(t){this[n]=t,_.each(this.children,function(n){n[e]=t})}})}}),_.extend(i.prototype,t.Shape.prototype,{_flagAdditions:!1,_flagSubtractions:!1,_flagOpacity:!0,_flagMask:!1,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_mask:null,clone:function(t){t=t||this.parent;var e=new i;return t.add(e),_.map(this.children,function(t){return t.clone(e)}),e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e},toObject:function(){var t={children:{},translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};return _.each(this.children,function(e,n){t.children[n]=e.toObject()},this),t},corner:function(){var t=this.getBoundingClientRect(!0),e={x:t.left,y:t.top};return _.each(this.children,function(t){t.translation.subSelf(e)}),this},center:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2,y:t.top+t.height/2},_.each(this.children,function(e){e.translation.subSelf(t.centroid)}),this},getById:function(t){var e=function(t,n){if(t.id===n)return t;for(var i in t.children){var r=e(t.children[i],n);if(r)return r}};return e(this,t)||null},getByClassName:function(t){var e=[],n=function(t,i){-1!=t.classList.indexOf(i)&&e.push(t);for(var r in t.children)n(t.children[r],i);return e};return n(this,t)},getByType:function(e){var n=[],i=function(e,r){for(var s in e.children)e.children[s]instanceof r?n.push(e.children[s]):e.children[s]instanceof t.Group&&i(e.children[s],r);return n};return i(this,e)},add:function(t){var e=this.children,n=this.additions,i,r,s;return _.isArray(t)||(t=_.toArray(arguments)),_.each(t,function(t){t&&(i=t.id,r=t.parent,_.isUndefined(e[i])&&(r&&(delete r.children[i],s=_.indexOf(r.additions,i),s>=0&&r.additions.splice(s,1)),e[i]=t,t.parent=this,n.push(i),this._flagAdditions=!0))},this),this},remove:function(t){var e=this.children,n=this.parent,i=this.subtractions,r,s,o;return 0>=arguments.length&&n?(n.remove(this),this):(_.isArray(t)||(t=_.toArray(arguments)),_.each(t,function(t){r=t.id,s=t.parent,r in e&&(delete e[r],delete t.parent,o=_.indexOf(s.additions,r),o>=0&&s.additions.splice(o,1),i.push(r),this._flagSubtractions=!0)},this),this)},getBoundingClientRect:function(){var t;this._update(!0);var i=1/0,r=-1/0,s=1/0,o=-1/0;return _.each(this.children,function(a){t=a.getBoundingClientRect(),_.isNumber(t.top)&&_.isNumber(t.left)&&_.isNumber(t.right)&&_.isNumber(t.bottom)&&(s=e(t.top,s),i=e(t.left,i),r=n(t.right,r),o=n(t.bottom,o))},this),{top:s,left:i,right:r,bottom:o,width:r-i,height:o-s}},noFill:function(){return _.each(this.children,function(t){t.noFill()}),this},noStroke:function(){return _.each(this.children,function(t){t.noStroke()}),this},subdivide:function(){var t=arguments;return _.each(this.children,function(e){e.subdivide.apply(e,t)}),this},flagReset:function(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),this._flagMask=this._flagOpacity=!1,t.Shape.prototype.flagReset.call(this),this}}),i.MakeObservable(i.prototype)}(Two);var canvas={init:function(){var t;t=$("div.canvas"),console.log(t),t.length&&this.play(t[0])},play:function(t){function e(t,e,n){return(1-t)*e+t*n}function n(t,e,n,i){return Math.sqrt((t-=n)*t+(e-=i)*e)}var i,r,s,o,a,c,l,u=window.Two||null;i={width:1100,height:300,steps:100,type:u.Types.canvas},console.log(t),r=new u(i).appendTo(t),s=document.querySelector("canvas"),o=[],s.style.marginRight="auto",s.style.marginLeft="auto",s.style.marginTop="10px",a={x:i.width/2,y:i.height/2},c={x:0,y:0},l=n(c.x,c.y,a.x,a.y);for(var h=0;h<i.width/i.steps;h++)for(var f=0;f<i.height/i.steps;f++){var d,p,v,m;d=r.makeRectangle((h+.5)*i.steps,(f+.5)*i.steps,i.steps,i.steps),p={x:(h+.5)*i.steps,y:(f+.5)*i.steps},v=n(p.x,p.y,a.x,a.y),m=Math.floor(e(v/l,250,190)),d.fill="rgb("+m+", "+m+", "+m+")",d.baseColor=m,d.noStroke(),o.push(d)}r.update();var g={x:-200,y:-200};r.renderer.domElement.addEventListener("mousemove",function(t){var e=this.getBoundingClientRect();g.x=t.clientX-e.left,g.y=t.clientY-e.top},!1),r.renderer.domElement.addEventListener("mouseleave",function(){g.x=-200,g.y=-200},!1),r.bind("update",function(){for(var t=0;t<o.length;t++){var i,r,s;i=o[t],r=0,s=n(g.x,g.y,i.translation.x,i.translation.y),200>s?(r=i.baseColor,r+=Math.floor(e(s/200,30,10)),r>255&&(r=255),i.fill="rgb("+r+", "+r+", "+r+")"):(r=i.baseColor,i.fill="rgb("+r+", "+r+", "+r+")")}}),r.play()}};canvas.init();